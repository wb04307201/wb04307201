# ACID

ACID是数据库事务的四大核心特性，用于确保数据在并发操作、系统故障等场景下的可靠性和一致性。

## 1. 原子性（Atomicity）
- **定义**：事务作为最小执行单元，要么全部完成（所有操作成功），要么全部回滚（所有操作撤销），不存在中间状态。
- **作用**：防止部分操作成功导致的逻辑错误（如转账时“转出成功但转入失败”）。
- **实现**：通过数据库的“事务日志”（如Undo Log）记录操作前的状态，若事务失败则通过日志回滚；通过“事务管理器”协调多个操作的原子性。

## 2. 一致性（Consistency）
- **定义**：事务执行前后，数据库必须从一种有效状态转移到另一种有效状态，满足所有预设的完整性约束（如主键唯一、外键关联、余额非负）。
- **作用**：确保业务逻辑的正确性（如转账后双方总金额不变）。
- **实现**：通过数据库的约束检查（如CHECK约束、触发器）、事务的原子性和隔离性共同保障。

## 3. 隔离性（Isolation）
- **定义**：多个事务并发执行时，彼此之间互不干扰，每个事务感觉像在独立执行（即使实际并发）。
- **作用**：避免“脏读”（读到未提交的数据）、“不可重复读”（同一事务内多次读取结果不同）、“幻读”（同一事务内多次查询结果集不同）等问题。
- **实现**：通过“锁机制”（如行锁、表锁）或“多版本并发控制（MVCC）”（如MySQL的InnoDB引擎）实现不同隔离级别（如读未提交、读已提交、可重复读、串行化）。

## 4. 持久性（Durability）
- **定义**：事务一旦提交，对数据的修改是永久性的，即使系统故障（如断电、崩溃）也能通过日志恢复。
- **作用**：确保数据的长期可靠性（如已确认的订单不会丢失）。
- **实现**：通过“事务日志”（如Redo Log）记录操作后的状态，系统故障后利用日志重做（Redo）未写入磁盘的数据；通过“预写日志（WAL）”确保日志写入先于数据写入。

## ACID的平衡与取舍
- **关系型数据库**（如MySQL、PostgreSQL、Oracle）严格支持ACID，适用于对数据一致性要求高的场景（如金融、电商）。
- **NoSQL数据库**（如MongoDB、Cassandra）通常通过牺牲部分隔离性或持久性（如最终一致性）来提升性能和扩展性，适用于高并发、低延迟的场景（如社交网络、实时分析）。

## 实际应用场景
- **金融系统**：转账、支付等操作需严格满足ACID，确保资金安全。
- **电商系统**：订单创建、库存扣减需原子性和一致性，避免超卖。
- **分布式系统**：通过分布式事务（如两阶段提交、TCC）协调多个节点的ACID特性。

**总结**：ACID是数据库可靠性的基石，理解其特性有助于设计高可靠、高一致性的系统。在实际开发中，需根据业务需求（如性能 vs 一致性）选择合适的数据库和隔离级别。